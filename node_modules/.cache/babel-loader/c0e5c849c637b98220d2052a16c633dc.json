{"ast":null,"code":"import Keycloak from \"keycloak-js\";\nvar _kc = new Keycloak('/keycloak.json');\n\n/**\r\n * Initializes Keycloak instance and calls the provided callback function if successfully authenticated.\r\n *\r\n * @param onAuthenticatedCallback\r\n */\nvar initKeycloak = function initKeycloak(onAuthenticatedCallback) {\n  _kc.init({\n    onLoad: 'check-sso',\n    silentCheckSsoRedirectUri: window.location.origin + '/silent-check-sso.html',\n    pkceMethod: 'S256'\n  }).then(function (authenticated) {\n    if (!authenticated) {\n      console.log(\"user is not authenticated..!\");\n    }\n    onAuthenticatedCallback();\n  }).catch(console.error);\n};\nvar doLogin = _kc.login;\nvar doLogout = _kc.logout;\nvar getToken = function getToken() {\n  return _kc.token;\n};\nvar isLoggedIn = function isLoggedIn() {\n  return !!_kc.token;\n};\nvar updateToken = function updateToken(successCallback) {\n  return _kc.updateToken(5).then(successCallback).catch(doLogin);\n};\nvar getUsername = function getUsername() {\n  var _kc$tokenParsed;\n  return (_kc$tokenParsed = _kc.tokenParsed) === null || _kc$tokenParsed === void 0 ? void 0 : _kc$tokenParsed.preferred_username;\n};\nvar hasRole = function hasRole(roles) {\n  return roles.some(function (role) {\n    return _kc.hasRealmRole(role);\n  });\n};\nvar UserService = {\n  initKeycloak: initKeycloak,\n  doLogin: doLogin,\n  doLogout: doLogout,\n  isLoggedIn: isLoggedIn,\n  getToken: getToken,\n  updateToken: updateToken,\n  getUsername: getUsername,\n  hasRole: hasRole\n};\nexport default UserService;","map":{"version":3,"names":["Keycloak","_kc","initKeycloak","onAuthenticatedCallback","init","onLoad","silentCheckSsoRedirectUri","window","location","origin","pkceMethod","then","authenticated","console","log","catch","error","doLogin","login","doLogout","logout","getToken","token","isLoggedIn","updateToken","successCallback","getUsername","_kc$tokenParsed","tokenParsed","preferred_username","hasRole","roles","some","role","hasRealmRole","UserService"],"sources":["C:/Users/Admin/Desktop/projects/auth/keycloak-reactjs-demo/src/services/UserService.js"],"sourcesContent":["import Keycloak from \"keycloak-js\";\r\n\r\nconst _kc = new Keycloak('/keycloak.json');\r\n\r\n/**\r\n * Initializes Keycloak instance and calls the provided callback function if successfully authenticated.\r\n *\r\n * @param onAuthenticatedCallback\r\n */\r\nconst initKeycloak = (onAuthenticatedCallback) => {\r\n  _kc.init({\r\n    onLoad: 'check-sso',\r\n    silentCheckSsoRedirectUri: window.location.origin + '/silent-check-sso.html',\r\n    pkceMethod: 'S256',\r\n  })\r\n    .then((authenticated) => {\r\n      if (!authenticated) {\r\n        console.log(\"user is not authenticated..!\");\r\n      }\r\n      onAuthenticatedCallback();\r\n    })\r\n    .catch(console.error);\r\n};\r\n\r\nconst doLogin = _kc.login;\r\n\r\nconst doLogout = _kc.logout;\r\n\r\nconst getToken = () => _kc.token;\r\n\r\nconst isLoggedIn = () => !!_kc.token;\r\n\r\nconst updateToken = (successCallback) =>\r\n  _kc.updateToken(5)\r\n    .then(successCallback)\r\n    .catch(doLogin);\r\n\r\nconst getUsername = () => _kc.tokenParsed?.preferred_username;\r\n\r\nconst hasRole = (roles) => roles.some((role) => _kc.hasRealmRole(role));\r\n\r\nconst UserService = {\r\n  initKeycloak,\r\n  doLogin,\r\n  doLogout,\r\n  isLoggedIn,\r\n  getToken,\r\n  updateToken,\r\n  getUsername,\r\n  hasRole,\r\n};\r\n\r\nexport default UserService;\r\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,aAAa;AAElC,IAAMC,GAAG,GAAG,IAAID,QAAQ,CAAC,gBAAgB,CAAC;;AAE1C;AACA;AACA;AACA;AACA;AACA,IAAME,YAAY,GAAG,SAAfA,YAAYA,CAAIC,uBAAuB,EAAK;EAChDF,GAAG,CAACG,IAAI,CAAC;IACPC,MAAM,EAAE,WAAW;IACnBC,yBAAyB,EAAEC,MAAM,CAACC,QAAQ,CAACC,MAAM,GAAG,wBAAwB;IAC5EC,UAAU,EAAE;EACd,CAAC,CAAC,CACCC,IAAI,CAAC,UAACC,aAAa,EAAK;IACvB,IAAI,CAACA,aAAa,EAAE;MAClBC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;IAC7C;IACAX,uBAAuB,EAAE;EAC3B,CAAC,CAAC,CACDY,KAAK,CAACF,OAAO,CAACG,KAAK,CAAC;AACzB,CAAC;AAED,IAAMC,OAAO,GAAGhB,GAAG,CAACiB,KAAK;AAEzB,IAAMC,QAAQ,GAAGlB,GAAG,CAACmB,MAAM;AAE3B,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAA;EAAA,OAASpB,GAAG,CAACqB,KAAK;AAAA;AAEhC,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAA;EAAA,OAAS,CAAC,CAACtB,GAAG,CAACqB,KAAK;AAAA;AAEpC,IAAME,WAAW,GAAG,SAAdA,WAAWA,CAAIC,eAAe;EAAA,OAClCxB,GAAG,CAACuB,WAAW,CAAC,CAAC,CAAC,CACfb,IAAI,CAACc,eAAe,CAAC,CACrBV,KAAK,CAACE,OAAO,CAAC;AAAA;AAEnB,IAAMS,WAAW,GAAG,SAAdA,WAAWA,CAAA;EAAA,IAAAC,eAAA;EAAA,QAAAA,eAAA,GAAS1B,GAAG,CAAC2B,WAAW,cAAAD,eAAA,uBAAfA,eAAA,CAAiBE,kBAAkB;AAAA;AAE7D,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAIC,KAAK;EAAA,OAAKA,KAAK,CAACC,IAAI,CAAC,UAACC,IAAI;IAAA,OAAKhC,GAAG,CAACiC,YAAY,CAACD,IAAI,CAAC;EAAA,EAAC;AAAA;AAEvE,IAAME,WAAW,GAAG;EAClBjC,YAAY,EAAZA,YAAY;EACZe,OAAO,EAAPA,OAAO;EACPE,QAAQ,EAARA,QAAQ;EACRI,UAAU,EAAVA,UAAU;EACVF,QAAQ,EAARA,QAAQ;EACRG,WAAW,EAAXA,WAAW;EACXE,WAAW,EAAXA,WAAW;EACXI,OAAO,EAAPA;AACF,CAAC;AAED,eAAeK,WAAW"},"metadata":{},"sourceType":"module"}